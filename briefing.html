<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="shortcut icon" href="imagens/favicon.ico" type="image/x-icon">
<title>Briefing de Projeto — JEFIGN</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

<style>
:root{
  --brand-blue: #366BB3;
  --ink:        #1E1E1E;
  --indigo:     #5D57A1;
  --sky:        #B5D1EF;
  --paper:      #FAFAFA;
  --muted:      #8EA5C4;
  --radius:     16px;
  --shadow-1:   0 10px 30px rgba(0,0,0,.12);
  --shadow-2:   0 20px 50px rgba(0,0,0,.18);
}
body{
  margin:0; font-family: Inter, sans-serif;
  color: var(--paper);
  background: linear-gradient(180deg, #181A1F 0%, var(--ink) 100%);
}
.container{ width:min(1120px, 92%); margin:auto; padding:40px 0;}
header{
      position:sticky; top:0; z-index:50;
      background:rgba(30,30,30,.85);
      backdrop-filter: blur(8px);
      border-bottom:1px solid rgba(255,255,255,.06);
    }
    .nav{ display:flex; align-items:center; justify-content:space-between; padding:14px 0; }
    .brand{ display:flex; align-items:center; gap:12px; text-decoration:none; color:var(--paper); }
    .brand__logo{ width:38px; height:38px; border-radius:10px; display:grid; place-items:center; box-shadow: var(--shadow-1); font-weight:800; }

    .menu{display:flex; gap:24px; align-items:center;}
    .menu a{ color:#e9eefb; text-decoration:none; font-weight:600; font-size:.95rem; opacity:.9; }
    .menu a:hover{opacity:1; color:#fff}
    .cta{ padding:10px 16px; border-radius:999px; font-weight:700; text-decoration:none; background: linear-gradient(135deg, var(--brand-blue), var(--indigo)); color:white; box-shadow: var(--shadow-1); border:1px solid rgba(255,255,255,.06); }
    .burger{ display:none; width:40px; height:40px; border-radius:10px; border:1px solid rgba(255,255,255,.12); background:transparent; color:#fff }

    @media (max-width: 768px) {
      .menu{ display:none; }
      .nav{ justify-content:space-between; }
      .burger{ display:inline-grid; place-items:center }
      .menu--open{
        position:fixed; inset:64px 0 auto 0; display:grid; gap:18px;
        background:#16171B; padding:20px; border-top:1px solid rgba(255,255,255,.06);
      }
      .menu--open a{ padding:10px 2px }
    }
h1{font-size:2.5rem; margin-bottom:16px; text-align:center; font-weight:800;}
h2{font-size:1.5rem; margin-top:32px; margin-bottom:8px; font-weight:700;}
label{display:block; margin-top:12px; font-weight:600;}
input, textarea, select{
  width:100%; padding:12px; margin-top:4px;
  border-radius:12px; border:1px solid rgba(255,255,255,.12);
  background:#0f1115; color:#EAF1FF; outline:none;
}
textarea{ min-height:100px; resize:vertical;}
button{
  margin-top:20px; padding:14px 24px; border:none; border-radius:999px;
  font-weight:700; background: linear-gradient(135deg, var(--brand-blue), var(--indigo));
  color:white; cursor:pointer; box-shadow: var(--shadow-2);
}
.helper{margin-top:8px; font-size:.9rem; color:#AEBBD4;}
</style>
</head>
<body>
<header>
    <div class="container nav">
      <a href="index.html" class="brand">
        <div class="brand__logo"><img src="imagens/logo05.png" alt=""></div>
      </a>

      <nav id="menu" class="menu" aria-label="Navegação principal">
        <a href="servicos.html">Serviços</a>
        <a href="portfolio.html">Portfólio</a>
        <a href="index.html#sobre">Sobre</a>
        <a href="contato.html">Contato</a>
        <a class="cta" href="briefing.html">Solicitar projeto</a>
      </nav>

      <button class="burger" id="burger" aria-label="Abrir menu">☰</button>
    </div>
  </header>
<div class="container">
  <h1>Briefing de Projeto — JEFIGN</h1>
  <p style="text-align:center; color:#D6DEED; max-width:700px; margin:auto;">Preencha o formulário para nos enviar todas as informações necessárias para criar a identidade visual da sua marca. Inclua referências visuais, cores e materiais de exemplo.</p>

  <form id="briefingForm" enctype="multipart/form-data">
    <!-- 1. Informações do Cliente -->
    <h2>1. Informações do Cliente</h2>
    <label>Nome da empresa / marca
      <input type="text" name="empresa" required>
    </label>
    <label>Nome do responsável / contato
      <input type="text" name="responsavel" required>
    </label>
    <label>E-mail
      <input type="email" name="email" required>
    </label>
    <label>Telefone / WhatsApp
      <input type="text" name="telefone" required>
    </label>
    <label>Website / redes sociais
      <input type="text" name="website">
    </label>

    <!-- 2. Sobre a Marca -->
    <h2>2. Sobre a Marca</h2>
    <label>Qual é o segmento / área de atuação?
      <input type="text" name="segmento">
    </label>
    <label>Há quanto tempo está no mercado?
      <input type="text" name="tempo">
    </label>
    <label>Quais os valores da marca?
      <textarea name="valores"></textarea>
    </label>
    <label>Qual a missão da marca?
      <textarea name="missao"></textarea>
    </label>

    <!-- 3. Objetivo do Projeto -->
    <h2>3. Objetivo do Projeto</h2>
    <label>Qual é o principal objetivo com este projeto?
      <input type="text" name="objetivo">
    </label>
    <label>O que você espera que sua marca transmita para o público?
      <textarea name="mensagem_marca"></textarea>
    </label>
    <label>Quais problemas ou desafios você quer resolver com este projeto?
      <textarea name="desafios"></textarea>
    </label>

    <!-- 4. Público-Alvo -->
    <h2>4. Público-Alvo</h2>
    <label>Quem são os clientes ideais?
      <textarea name="clientes"></textarea>
    </label>
    <label>Idade, gênero, localização
      <input type="text" name="idade">
    </label>
    <label>Hábitos, interesses ou comportamentos relevantes
      <textarea name="habitos"></textarea>
    </label>
    <label>Que tipo de linguagem / estilo você quer que a marca passe?
      <input type="text" name="linguagem" placeholder="ex.: formal, moderna, divertida">
    </label>

    <!-- 5. Concorrência -->
    <h2>5. Concorrência</h2>
    <label>Principais concorrentes
      <textarea name="concorrentes"></textarea>
    </label>
    <label>O que você gosta ou não gosta nas marcas concorrentes?
      <textarea name="preferencias"></textarea>
    </label>

    <!-- 6. Estilo e Inspirações -->
    <h2>6. Estilo e Inspirações</h2>
    <label>Paletas de cores preferidas (ou cores a evitar)
      <input type="text" name="cores">
    </label>
    <label>Tipos de fontes / estilos de texto que gosta
      <input type="text" name="fontes">
    </label>
    <label>Exemplos de marcas ou designs que te inspiram
      <input type="file" name="imagem_referencia" id="imagem" accept="image/*">
      <span class="helper">Envie uma imagem de referência (opcional)</span>
    </label>

    <!-- 7. Serviços Contratados -->
    <h2>7. Serviços Contratados / Necessidades</h2>
    <label><input type="checkbox" name="servicos" value="Identidade Visual"> Identidade Visual</label>
    <label><input type="checkbox" name="servicos" value="Design Social Media"> Design Social Media</label>
    <label><input type="checkbox" name="servicos" value="Materiais Gráficos"> Materiais Gráficos</label>
    <label><input type="checkbox" name="servicos" value="Outros"> Outros</label>

    <!-- 8. Prazos e Entregáveis -->
    <h2>8. Prazos e Entregáveis</h2>
    <label>Data de início desejada
      <input type="date" name="data_inicio">
    </label>
    <label>Data de entrega final desejada
      <input type="date" name="data_entrega">
    </label>
    <label>Alguma etapa importante que deve ser respeitada?
      <textarea name="etapas"></textarea>
    </label>
    <label>Formato dos arquivos esperados
      <input type="text" name="formato" placeholder="Digital, Impressão, Editável…">
    </label>

    <!-- 9. Observações -->
    <h2>9. Observações Adicionais</h2>
    <textarea name="observacoes" placeholder="Algo importante que não foi perguntado"></textarea>

    <button type="submit">Enviar Briefing</button>
    <div id="resposta"></div>
  </form>
</div>

<script>
const form = document.getElementById('briefingForm');
const respostaDiv = document.getElementById('resposta');

form.addEventListener('submit', async function(e){
  e.preventDefault();
  
 
  respostaDiv.innerHTML = '<p style="color: #B5D1EF;">Enviando briefing...</p>';
  
  try {
    const formData = new FormData(form);
    
 
    const servicosSelecionados = [];
    const checkboxes = form.querySelectorAll('input[name="servicos"]:checked');
    checkboxes.forEach(checkbox => {
      servicosSelecionados.push(checkbox.value);
    });
    
  
    formData.append('servicos_json', JSON.stringify(servicosSelecionados));
    
    const response = await fetch('/submit-briefing', {
       method: 'POST',
       body: formData
     });
    
    // Verificar se a resposta é OK
    if (!response.ok) {
      throw new Error(`Erro HTTP: ${response.status}`);
    }
    
    // Obter o texto da resposta primeiro
    const responseText = await response.text();
    
    // Tentar extrair JSON válido da resposta (ignorando warnings PHP)
    let result;
    try {
      // Procurar pelo último JSON válido na resposta
      const jsonMatch = responseText.match(/\{[^{}]*"success"[^{}]*\}$/);
      if (jsonMatch) {
        result = JSON.parse(jsonMatch[0]);
      } else {
        // Se não encontrar JSON, tentar parse direto
        result = JSON.parse(responseText);
      }
    } catch (parseError) {
      console.error('Resposta do servidor:', responseText);
      throw new Error('Resposta inválida do servidor');
    }
    
    if (result.success) {
      respostaDiv.innerHTML = `
        <div style="background: #1a4d3a; border: 1px solid #22c55e; border-radius: 12px; padding: 16px; margin-top: 16px;">
          <p style="color: #22c55e; margin: 0; font-weight: 600;">✅ Briefing enviado com sucesso!</p>
          <p style="color: #86efac; margin: 8px 0 0 0; font-size: 0.9rem;">Obrigado! Entraremos em contato em breve.</p>
        </div>
      `;
      form.reset();
    } else {
      throw new Error(result.message || 'Erro desconhecido');
    }
    
  } catch (error) {
    console.error('Erro ao enviar briefing:', error);
    respostaDiv.innerHTML = `
      <div style="background: #4d1a1a; border: 1px solid #ef4444; border-radius: 12px; padding: 16px; margin-top: 16px;">
        <p style="color: #ef4444; margin: 0; font-weight: 600;">❌ Erro ao enviar briefing</p>
        <p style="color: #fca5a5; margin: 8px 0 0 0; font-size: 0.9rem;">${error.message}</p>
      </div>
    `;
  }
});


form.addEventListener('input', function() {
  respostaDiv.innerHTML = '';
});
</script>
</body>
</html>
